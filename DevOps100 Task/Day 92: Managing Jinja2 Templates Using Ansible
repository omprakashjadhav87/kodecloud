One of the Nautilus DevOps team members is working on to develop a role for httpd installation and configuration. Work is almost completed, however there is a requirement
to add a jinja2 template for index.html file. Additionally, the relevant task needs to be added inside the role. The inventory file ~/ansible/inventory is already present
on jump host that can be used. Complete the task as per details mentioned below:

a. Update ~/ansible/playbook.yml playbook to run the httpd role on App Server 1.

b. Create a jinja2 template index.html.j2 under /home/thor/ansible/role/httpd/templates/ directory and add a line This file was created using Ansible on <respective server>
(for example This file was created using Ansible on stapp01 in case of App Server 1). Also please make sure not to hard code the server name inside the template. Instead,
use inventory_hostname variable to fetch the correct value.

c. Add a task inside /home/thor/ansible/role/httpd/tasks/main.yml to copy this template on App Server 1 under /var/www/html/index.html. Also make sure that /var/www/html/index.html
file's permissions are 0755.

d. The user/group owner of /var/www/html/index.html file must be respective sudo user of the server (for example tony in case of stapp01).

Note: Validation will try to run the playbook using command ansible-playbook -i inventory playbook.yml so please make sure the playbook works this way without passing
any extra arguments.

Solutions:- 

Perfomr All Task on only Jump host .

Update ~/ansible/playbook.yml to run the httpd role.

---
- hosts: stapp01
become: yes 
become_user: root
roles: - role/httpd
 

✅ b. Create the Jinja2 template index.html.j2
Create the file at /home/thor/ansible/role/httpd/templates/index.html.j2 with the following content:

vi index.html.j2
This file was created using Ansible on {{ inventory_hostname }}

✅ c. Add the task to copy the template in main.yml
Edit /home/thor/ansible/role/httpd/tasks/main.yml and add the following task:

vi /main.yml

- name: Deploy index.html using Jinja2 template
  template:
    src: index.html.j2
    dest: /var/www/html/index.html
    mode: '0755'
    owner: "{{ ansible_user }}"
    group: "{{ ansible_user }}"

Make sure your directory(ansible)
cd ansible/

Then run:
ansible-playbook -i ~/ansible/inventory ~/ansible/playbook.yml


Task validation:-

Check the result

ssh tony@stapp01

cat /var/www/html/index.html

This file was created using Ansible on stapp01
