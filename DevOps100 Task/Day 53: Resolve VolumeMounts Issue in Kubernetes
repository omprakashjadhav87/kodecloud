We encountered an issue with our Nginx and PHP-FPM setup on the Kubernetes cluster this morning, which halted its functionality. Investigate and rectify the issue:
The pod name is nginx-phpfpm and configmap name is nginx-config. Identify and fix the problem.
Once resolved, copy /home/thor/index.php file from the jump host to the nginx-container within the nginx document root. After this, you should be able to access the website using Website
button on the top bar.
Note: The kubectl utility on jump_host is configured to operate with the Kubernetes cluster.

Solutions:-

âœ… Steps to Resolve VolumeMounts Issue in Kubernetes
ğŸ” 1. Inspect Cluster Resources
kubectl get all -o wide

ğŸ“„ 2. Review ConfigMap
kubectl describe configmap nginx-config

ğŸ“¦ 3. Extract Pod Spec for Editing
kubectl get pod nginx-phpfpm -o yaml > /tmp/nginx.yaml

ğŸ” 4. Inspect VolumeMounts and Document Root
cat /tmp/nginx.yaml | grep /usr/share/nginx/html

volumeMounts:
    - mountPath: /usr/share/nginx/html ( This need to be change )

ğŸ› ï¸ 5. Edit Pod Spec
vi /tmp/nginx.yaml
Fixed any misconfigured volumeMounts or volumes referencing the configmap.

change this part to /var/www/html  {"mountPath":"/usr/share/nginx/htmlâ€}

   volumeMounts:
    - mountPath: /var/www/html -- it should be look like 

âœ… 6. Confirm Changes
cat /tmp/nginx.yaml | grep /usr/share/nginx/html


ğŸ”„ 7. Apply Fixed Pod Spec
kubectl replace -f /tmp/nginx.yaml --force

ğŸ“¦ 8. Confirm Pod Status
kubectl get pods

ğŸ“ 9. Copy index.php to Nginx Container
kubectl cp /home/thor/index.php nginx-phpfpm:/var/www/html -c nginx-container

ğŸŒ 10. Test Web Server from Inside Container
kubectl exec -it nginx-phpfpm -c nginx-container -- curl -I http://localhost:8099

Verified that the Nginx server is serving content correctly.
