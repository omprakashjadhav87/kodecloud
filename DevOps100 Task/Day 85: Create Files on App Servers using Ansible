The Nautilus DevOps team is testing various Ansible modules on servers in Stratos DC. They're currently focusing on file creation on remote hosts using Ansible. Here are the details:
a. Create an inventory file ~/playbook/inventory on jump host and include all app servers.
b. Create a playbook ~/playbook/playbook.yml to create a blank file /tmp/nfsdata.txt on all app servers.
c. Set the permissions of the /tmp/nfsdata.txt file to 0655.
d. Ensure the user/group owner of the /tmp/nfsdata.txt file is tony on app server 1, steve on app server 2 and banner on app server 3.

Note: Validation will execute the playbook using the command ansible-playbook -i inventory playbook.yml, so ensure the playbook functions correctly without any additional arguments.

solutions:-

From the jump host:
ssh-keygen -t rsa

ssh-copy-id tony@stapp01
ssh-copy-id steve@stapp02
ssh-copy-id banner@stapp03

create inventory file

[app_server]
stapp01 ansible_user=tony ansible_password=Ir0nM@n
stapp02 ansible_user=steve ansible_password=Am3ric@
stapp03 ansible_user=banner ansible_password=BigGr33n

playbook.yml

---
- name: Create /tmp/nfsdata.txt with specific ownership and permissions
  hosts: app_servers
  become: true
  tasks:
    - name: Create blank file /tmp/nfsdata.txt
      file:
        path: /tmp/nfsdata.txt
        state: touch
        mode: '0655'
        owner: "{{ file_owner }}"
        group: "{{ file_owner }}"

  vars:
    file_owner_map:
      stapp01: tony
      stapp02: steve
      stapp03: banner

    file_owner: "{{ file_owner_map[inventory_hostname] }}"


run playbook 

ansible-playbook -i inventory playbook.yml
