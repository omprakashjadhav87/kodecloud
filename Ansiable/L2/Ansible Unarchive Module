One of the DevOps team members has created a zip archive on jump host in Stratos DC that needs to be extracted and copied over to all app servers in Stratos DC itself. Because this is a routine task, the Nautilus DevOps team has suggested automating it. We can use Ansible since we have been using it for other automation tasks. 
Below you can find more details about the task:
We have an inventory file under /home/thor/ansible directory on jump host, which should have all the app servers added already.
There is a zip archive /usr/src/itadmin/devops.zip on jump host.
Create a playbook.yml under /home/thor/ansible/ directory on jump host itself to perform the below given tasks.
Unzip /usr/src/itadmin/devops.zip archive in /opt/itadmin/ location on all app servers.
Make sure the extracted data must has the respective sudo user as their user and group owner, i.e tony for app server 1, steve for app server 2, banner for app server 3.
The extracted data permissions must be 0655.
Note: Validation will try to run the playbook using command ansible-playbook -i inventory playbook.yml so please make sure playbook works this way, without passing any extra arguments.

Solutions:-

Here's how you can structure your playbook.yml to meet the requirements:

========================================

---
- name: Unarchive devops.zip on all app servers
  hosts: all
  become: yes
  tasks:
    - name: Unarchive the devops.zip file
      unarchive:
        src: /usr/src/itadmin/devops.zip
        dest: /opt/itadmin/
        owner: "{{ ansible_user }}"
        group: "{{ ansible_user }}"
        mode: '0655'

    - name: Set ownership and permissions for app server 1
      file:
        path: /opt/itadmin/
        recurse: yes
        owner: tony
        group: tony
        mode: '0655'
      when: inventory_hostname == 'stapp01'

    - name: Set ownership and permissions for app server 2
      file:
        path: /opt/itadmin/
        recurse: yes
        owner: steve
        group: steve
        mode: '0655'
      when: inventory_hostname == 'stapp02'

    - name: Set ownership and permissions for app server 3
      file:
        path: /opt/itadmin/
        recurse: yes
        owner: banner
        group: banner
        mode: '0655'
      when: inventory_hostname == 'stapp03'
=======================================================================
Explanation:
Unarchive Task: The unarchive module now runs on each app server, setting the owner and group to the respective ansible_user.

Set Ownership and Permissions: The file module sets the ownership and permissions for each app server based on its hostname (stapp01, stapp02, stapp03).

Generate a SSH key on Jump Host . Please note it should Thor user.
ssh-keygen -t rsa -b 2048

Copy SSH key to all servers setup password-less authentication to the host
ssh-copy-id  tony@stapp01

You can run the playbook with the command:
sudo ansible-playbook -i inventory playbook.yml



