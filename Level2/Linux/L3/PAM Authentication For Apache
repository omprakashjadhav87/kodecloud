We have a requirement where we want to password protect a directory in the Apache web server document root. We want to password protect http://<website-url>:<apache_port>/protected/ URL as per the following requirements (you can use any website-url for it like localhost since there are no such specific requirements as of now). Setup the same on App server 3 as per below mentioned requirements:
a. We want to use basic authentication.
b. We do not want to use htpasswd file based authentication. Instead, we want to use PAM authentication, i.e Basic Auth + PAM so that we can authenticate with a Linux user.
c. We already have a user mariyam with password TmPcZjtRQx which you need to provide access to.
d. You can test the same using a curl command from jump host curl http://<website-url>:<apache_port>/protected/.

Solutions:-
Task perform on app server 3 in my case
üõ†Ô∏è Setup Instructions

1. Install Required Modules
sudo yum install -y mod_authnz_external pwauth

2. Load the module in Apache/httpd
Add this line to your Apache config (usually in /etc/httpd/conf/httpd.conf
paste in last line.

LoadModule authnz_external_module modules/mod_authnz_external.so

3. Make sure /var/www/html/protected exists and is accessible:
sudo mkdir -p /var/www/html/protected

4 . cat /var/www/html/protected/index.html

5. start Apache to Apply Changes.
sudo systemctl start httpd

6. ‚úÖ Test Authentication
From your webserver3 host
curl -u mariyam:TmPcZjtRQx http://localhost:8080/protected/

